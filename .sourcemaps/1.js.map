{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"1.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { LoginPage } from './login';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    LoginPage\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(LoginPage)\r\n  ],\r\n  exports: [\r\n    LoginPage\r\n  ]\r\n})\r\n\r\nexport class LoginPageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import {Component, OnInit} from \"@angular/core\";\r\nimport {FormGroup, Validators, FormBuilder} from '@angular/forms';\r\nimport {IonicPage, NavController, AlertController, ToastController, MenuController} from \"ionic-angular\";\r\nimport {HotelService} from \"../../providers/hotel-service\";\r\n\r\n\r\n@IonicPage({\r\n  name: 'page-login',\r\n  segment: 'login',\r\n})\r\n\r\n@Component({\r\n  selector: 'page-login',\r\n  templateUrl: 'login.html'\r\n})\r\nexport class LoginPage implements OnInit {\r\n  email = \"\"\r\n  password = \"\"\r\n  public onLoginForm: FormGroup;\r\n\r\n  constructor(private _fb: FormBuilder, public nav: NavController, public forgotCtrl: AlertController, public menu: MenuController, public toastCtrl: ToastController,  private hotelService: HotelService) {\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.onLoginForm = this._fb.group({\r\n      email: ['', Validators.compose([\r\n        Validators.required\r\n      ])],\r\n      password: ['', Validators.compose([\r\n        Validators.required\r\n      ])]\r\n    });\r\n  }\r\n\r\n  // go to register page\r\n  register() {\r\n    this.nav.setRoot('page-register');\r\n  }\r\n\r\n  // login and go to home page\r\n  login(email, password) {\r\n    //this.nav.setRoot('page-hotel');\r\n    console.log(\"--\", email, password)\r\n    this.getUserFromServer(email, password);\r\n  }\r\n\r\n\r\n  getUserFromServer(email, password){\r\n    var InitiateGetTransactions = function(email, password, callback) // How can I use this callback?\r\n     {\r\n         var request = new XMLHttpRequest();\r\n         request.onreadystatechange = function()\r\n         {\r\n             if (request.readyState == 4 && request.status == 200)\r\n             {\r\n                 callback(request.responseText); // Another callback here\r\n             }\r\n             if (request.readyState == 4 && request.status == 0)\r\n             {\r\n                 //console.log(\"no response for resturants\") // Another callback here\r\n             }\r\n         }; \r\n         //console.log(\"sending _this.userIdTag to server\", userIdTag)\r\n         request.open(\"POST\", \"https://api.anomoz.com/api/ngo-relief/post/get_user.php?email=\"+email+\"&password=\"+password);\r\n         request.send();\r\n     }\r\n     \r\n     var _this = this;\r\n     var frameTransactions = function mycallback(data) {\r\n       console.log(\"user data received from server,\" , data)\r\n       var dataParsed\r\n       dataParsed = JSON.parse(data);\r\n       if(dataParsed.message==\"none\"){\r\n         console.log(\"no user\")\r\n       }\r\n       else{\r\n        _this.hotelService.storeSignupData(dataParsed[0].name, email, password, dataParsed[0].userIdTag);\r\n        _this.nav.setRoot('page-hotel');   \r\n        //console.log(sampleTrans)\r\n           \r\n          \t\r\n          }\r\n          //add to local storage\r\n          //console.log(\"bookings storage updated\", _this.bookings)\r\n          //_this.storage.set('resturants', _this.hotels);\r\n       }\r\n     \r\n     InitiateGetTransactions(email, password, frameTransactions); //passing mycallback as a method \r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}